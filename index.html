<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar Aset</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; margin: 0; background: #f1f5f9; color: #1e293b; padding-bottom: 80px; }
        header { background: #2563eb; color: white; padding: 20px; text-align: center; border-radius: 0 0 20px 20px; box-shadow: 0 4px 15px rgba(37,99,235,0.2); }
        .container { max-width: 600px; margin: 20px auto; padding: 0 15px; }
        .card { background: white; padding: 20px; border-radius: 16px; margin-bottom: 15px; border: 1px solid #e2e8f0; }
        label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.9rem; color: #475569; }
        input, select, textarea { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #e2e8f0; border-radius: 8px; box-sizing: border-box; }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; color: white; background: #2563eb; }
        /* Nav Bar */
        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; background: white; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #e2e8f0; }
        .nav-item { text-align: center; font-size: 0.75rem; color: #64748b; text-decoration: none; width: 100%; }
        .nav-item span { display: block; font-size: 1.2rem; margin-bottom: 2px; }
        .nav-item.active { color: #2563eb; font-weight: 700; }
    </style>
</head>
<body>
    <header><h1>Sistem Aset ICT</h1><p>Daftar Aduan Baru</p></header>
    <div class="container">
        <div class="card" style="display:flex; justify-content:space-between; text-align:center;">
            <div><b id="c-pending" style="font-size:1.5rem; display:block">0</b><span style="font-size:0.8rem; color:#64748b">Baru</span></div>
            <div><b id="c-process" style="font-size:1.5rem; color:#f59e0b; display:block">0</b><span style="font-size:0.8rem; color:#64748b">Proses</span></div>
            <div><b id="c-ready" style="font-size:1.5rem; color:#8b5cf6; display:block">0</b><span style="font-size:0.8rem; color:#64748b">Siap</span></div>
        </div>

        <div class="card">
            <h3>Borang Daftar</h3>
            <label>Nama Pemilik</label><input type="text" id="inp-name" placeholder="Nama Anda...">
            <label>Lokasi</label><input type="text" id="inp-loc" placeholder="Pejabat...">
            <label>Unit/Taska</label><input type="text" id="inp-taska" placeholder="Jika ada...">
            <label>Jenis</label>
            <select id="inp-type"><option value="PC">PC</option><option value="Laptop">Laptop</option><option value="Printer">Printer</option><option value="Network">Wifi/Network</option></select>
            <label>No. Siri</label><input type="text" id="inp-serial">
            <label>Masalah</label><textarea id="inp-issue" rows="3"></textarea>
            <button class="btn" id="btn-submit">Hantar Aduan</button>
        </div>
    </div>

    <nav class="bottom-nav">
        <a href="index.html" class="nav-item active"><span>üè†</span>Daftar</a>
        <a href="terima.html" class="nav-item"><span>üì•</span>Terima</a>
        <a href="jejak.html" class="nav-item"><span>üîç</span>Jejak</a>
        <a href="pulang.html" class="nav-item"><span>‚úÖ</span>Pulang</a>
        <a href="nota.html" class="nav-item"><span>‚öôÔ∏è</span>Nota</a>
    </nav>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

        // GANTI CONFIG DI SINI
        const firebaseConfig = { apiKey: "API_KEY", authDomain: "PROJECT.firebaseapp.com", databaseURL: "https://PROJECT-default-rtdb.firebaseio.com", projectId: "PROJECT", storageBucket: "PROJECT.appspot.com", messagingSenderId: "SENDER", appId: "APP_ID" };
        
        const app = initializeApp(firebaseConfig);
        const dbRef = getDatabase(app);

        // Submit Form
        document.getElementById('btn-submit').addEventListener('click', () => {
            let name = document.getElementById('inp-name').value;
            let issue = document.getElementById('inp-issue').value;
            if(!name || !issue) return alert("Sila isi Nama & Masalah!");

            push(ref(dbRef, 'assets'), {
                name, loc: document.getElementById('inp-loc').value,
                taska: document.getElementById('inp-taska').value,
                type: document.getElementById('inp-type').value,
                serial: document.getElementById('inp-serial').value,
                issue, status: 'PENDING', date: new Date().toLocaleString(),
                logs: [{ text: "Daftar Masuk", time: new Date().toLocaleString() }]
            }).then(() => { alert("Berjaya!"); window.location.reload(); });
        });

        // Live Stats
        onValue(ref(dbRef, 'assets'), (snap) => {
            let d = snap.val(); if(!d) return;
            let vals = Object.values(d);
            document.getElementById('c-pending').innerText = vals.filter(x=>x.status=='PENDING').length;
            document.getElementById('c-process').innerText = vals.filter(x=>x.status=='RECEIVED').length;
            document.getElementById('c-ready').innerText = vals.filter(x=>x.status=='COMPLETED').length;
        });
    </script>
</body>
</html>
